import network
import time

def connect_wifi(ssid, password):
    n = 0
    wlan = network.WLAN(network.STA_IF)  # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ WiFi –≤ —Ä–µ–∂–∏–º–µ —Å—Ç–∞–Ω—Ü–∏–∏ üòä
    wlan.active(True)  # –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º WiFi –∞–¥–∞–ø—Ç–µ—Ä üòä
    if not wlan.isconnected():
        print("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ç–∏:", ssid)  # –°–æ–æ–±—â–∞–µ–º –æ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è üòä
        wlan.connect(ssid, password)  # –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –∑–∞–¥–∞–Ω–Ω–æ–π —Å–µ—Ç–∏ üòä
        timeout = 100  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö üòä
        start = time.time()  # –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è üòä
        while not wlan.isconnected() and time.time() - start < timeout:
            time.sleep(1)  # –ñ–¥–µ–º 1 —Å–µ–∫—É–Ω–¥—É –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π üòä
            # print('try' + str(n += 1))
    if wlan.isconnected():
        print("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:", wlan.ifconfig())  # –í—ã–≤–æ–¥–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ (IP, –º–∞—Å–∫–∞, —à–ª—é–∑, DNS) üòä
    else:
        print("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WiFi")  # –°–æ–æ–±—â–∞–µ–º –æ –Ω–µ—É–¥–∞—á–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è üòä
    return wlan
